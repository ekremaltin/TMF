@model TMF.Models.Entity.users

@{
    ViewBag.Title = "Edit";
    var cs = Model.userGame.Any(a => a.game.id == 2);
    var lol = Model.userGame.Any(a => a.game.id == 1);


}

<h2>Edit</h2>
<span><b>Searchable</b></span>
<div class="onoffswitch3">
    <input type="checkbox" name="onoffswitch3" class="onoffswitch3-checkbox" id="myonoffswitch3" @if (Model.search) { <text> checked</text> }>
    <label class="onoffswitch3-label" for="myonoffswitch3">
        <span class="onoffswitch3-inner">
            <span class="onoffswitch3-active"><span class="onoffswitch3-switch">Active</span></span>
            <span class="onoffswitch3-inactive"><span class="onoffswitch3-switch">Inactive</span></span>
        </span>
    </label>
</div>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>users</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.id)

        <div class="form-group">
            @Html.LabelFor(model => model.username, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.username, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.username, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.password, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.password, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.password, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.dateOfBirth, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.dateOfBirth, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.dateOfBirth, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.image, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.image, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.image, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.mic, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.mic)
                    @Html.ValidationMessageFor(model => model.mic, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.headset, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.headset)
                    @Html.ValidationMessageFor(model => model.headset, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.online, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.online)
                    @Html.ValidationMessageFor(model => model.online, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
        @*<div class="form-group">
                <div id="game" class="form-group">
                    <label>Oyunlar :</label>
                    <div id="gameList">
                        <div id="cbList" class="form-group">
                        </div>
                    </div>
                </div>
            </div>*@

        @if (cs)
        {
            var csData = (Model.userGame.ToList().Where(a => a.game.id == 2).FirstOrDefault());
            var d = csData.userGameDesc.Where(b => b.compAtt.gameComponent.id == 5).FirstOrDefault();
            var f = d.compAtt.id;
            var csTime = Model.userGame.Where(u => u.game.id == 2).FirstOrDefault().time;
            <div id="csDiv">
                <div class="form-group form-inline">
                    Steam ID<input name="gameConnectIDcs" type="text" value="@csData.gameConnectID" />
                    Steam Nickname<input name="gameNickNamecs" type="text" value="@csData.gameNickName" />
                    @Html.Label("AWP", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="AWP" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 105).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Lurker", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Lurker" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 106).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Rifle", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Rifle" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 107).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("IGL", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="IGL" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 108).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Supporter", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Supporter" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 109).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Fragger", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Fragger" class="text-danger" @if (csData.userGameDesc.Where(u => u.compAtt.id == 110).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("CS Go Rank")
                        <div class="col-md-2">
                            <select name="rankCs" id="rankCs">
                                <option disabled>Rank Seçiniz</option>
                                @foreach (var item in ViewBag.csRanks)
                                {
                                    <option value="@item.Value" @if (int.Parse(item.Value) == f) { <text> selected </text> }>@item.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                    @Html.Label("csHours")
                    <div class="col-md-2">
                        <input type="number" name="csHours" value="@csTime" />
                    </div>
                </div>
            </div>

        }
        else
        {
            <div id="csDivNew">
                <div class="form-group form-inline">
                    Steam ID<input name="gameConnectIDcs" type="text" />
                    Steam Nickname<input name="gameNickNamecs" type="text" />
                    @Html.Label("AWP", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="AWP" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Lurker", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Lurker" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Rifle", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Rifle" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("IGL", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="IGL" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Supporter", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Supporter" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Fragger", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Fragger" class="text-danger" />
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("CS Go Rank")
                        <div class="col-md-2">
                            <select name="rankCs" id="rankCs">
                                <option disabled>Rank Seçiniz</option>
                                @foreach (var item in ViewBag.csRanks)
                                {
                                    <option value="@item.Value">@item.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                    @Html.Label("csHours")
                    <div class="col-md-2">
                        <input type="number" name="csHours" value="0" />
                    </div>
                </div>
            </div>

        }
        @if (lol)
        {
            var lolData = (Model.userGame.ToList().Where(a => a.game.id == 1).FirstOrDefault());
            var g = lolData.userGameDesc.Where(b => b.compAtt.gameComponent.id == 3).FirstOrDefault();
            var h = g.compAtt.id;
            var lolTime = Model.userGame.Where(u => u.game.id == 1).FirstOrDefault().time;
            <div id="lolDiv">
                <div class="form-group form-inline">
                    Lol Nickname<input name="gameNickNamelol" type="text" value="@lolData.gameNickName" />
                    @Html.Label("Top", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Top" class="text-danger" @if (lolData.userGameDesc.Where(u => u.compAtt.id == 82).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Jungle", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Jungle" class="text-danger" @if (lolData.userGameDesc.Where(u => u.compAtt.id == 84).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Mid", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Mid" class="text-danger" @if (lolData.userGameDesc.Where(u => u.compAtt.id == 83).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Adc", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Adc" class="text-danger" @if (lolData.userGameDesc.Where(u => u.compAtt.id == 85).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    @Html.Label("Support", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Support" class="text-danger" @if (lolData.userGameDesc.Where(u => u.compAtt.id == 86).FirstOrDefault() != null) { <text> checked="checked" </text> } />
                        </div>
                    </div>
                    aaaaaaaaaaaaa<input type="checkbox" name="asdasdasd" checked="checked" />
                    <div class="form-group">
                        @Html.Label("Lol Rank")
                        <div class="col-md-2">
                            <select name="rankLol" id="rankLol">
                                <option disabled>Rank Seçiniz</option>
                                @foreach (var item in ViewBag.lolRanks)
                                {
                                    <option value="@item.Value" @if (int.Parse(item.Value) == h) { <text> selected </text> }>@item.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                    @Html.Label("lolHours")
                    <div class="col-md-2">
                        <input type="number" name="lolHours" value="@lolTime" />
                    </div>
                </div>
            </div>

        }
        else
        {
            <div id="lolDiv">
                <div class="form-group form-inline">
                    Lol Nickname<input name="gameNickNamelol" type="text" />
                    @Html.Label("Top", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Top" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Jungle", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Jungle" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Mid", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Mid" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Adc", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Adc" class="text-danger" />
                        </div>
                    </div>
                    @Html.Label("Support", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        <div class="checkbox">
                            <input type="checkbox" name="Support" class="text-danger" />
                        </div>
                    </div>
                    aaaaaaaaaaaaa<input type="checkbox" name="asdasdasd" checked="checked" />
                    <div class="form-group">
                        @Html.Label("Lol Rank")
                        <div class="col-md-2">
                            <select name="rankLol" id="rankLol">
                                <option disabled>Rank Seçiniz</option>
                                @foreach (var item in ViewBag.lolRanks)
                                {
                                    <option value="@item.Value"> @item.Text</option>
                                }
                            </select>
                        </div>
                    </div>
                    @Html.Label("lolHours")
                    <div class="col-md-2">
                        <input type="number" name="lolHours" value="0" />
                    </div>
                </div>
            </div>

        }

        <div class="form-group">
            @Html.Label("Games")
            <div class="col-md-2">
                @foreach (var item in ViewBag.gameListt)
                {
                    <span>@item.Text</span>
                    <input type="checkbox" name="@item.Text.Split(' ')[0]" @if (Model.userGame.Any(u => u.game.id == int.Parse(item.Value))) { <text> checked </text> }>
                }
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Save" class="btn btn-default" />
            </div>
        </div>
    </div>
}


<input type="hidden" id="userID" value="@Model.id" />

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<link href="~/Content/css/onOff.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
@section scripts {
    <script>
        $(document).on("click", "#myonoffswitch3", function () {
            var degerler = {
                bit: $("#myonoffswitch3:checked").length == 1 ? true : false,
                id: $("#userID").val()
            };
            $.ajax({
                type: 'POST',
                url: '/users/userSearchable',
                data: JSON.stringify(degerler),
                dataType: "JSON",
                contentType: "application/json;charset=utf-8",
                success: function (gelenDeg) {
                    if (gelenDeg == "1") {
                        alert("Searchable is active!");
                    }
                    else if (gelenDeg == "0") {
                        alert("Searchable is inactive!");
                    }
                },
                error: function () {
                    alert("There was a problem occur!");
                }
            });
        });
    </script>
}